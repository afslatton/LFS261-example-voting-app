pipeline {
  agent any
  tools { 
    'NodeJS 8.9.0' 
  }
  stages {
    stage (build) {
      when {
        changeset "**/result/**"
      }
      step {
      echo "Compiling result app"
      dir ('worker') {
        sh 'npm install'
        }
      }
    }
   stage (test) {
      when {
      changeset "**/result/**"
      }
      step {
      echo 'Running Unit Tests on result app..'
      dir ('result') {
        sh "npm install"
        sh "npm test"
        }
     }
   }
  }
}
